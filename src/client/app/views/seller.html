
<div ng-show="isCurrentUserActive === false && showInactiveAlert === true" class="alert alert-danger beLocal-alert" role="alert">
    <button type="button" class="close" ng-click="hideInactiveAlert()">
        <span aria-hidden="true">&times;</span>
        <span class="sr-only">Close</span>
    </button>
    <span>
        <strong>Your account is currently inactive!</strong> 
        Until your account is activated, no one will be able to see your products or selling locations. After completing your profile, please email <a class="alert-link" href="mailto:{{StateService.getContactEmail()}}">{{StateService.getContactEmail()}}</a> to request activation!
    </span>
</div>
<div ng-show="showWarning" class="alert alert-warning alert-dismissible" role="alert">
  <button type="button" class="close" ng-click="resetWarning()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  <html-comp content="warningHTML"></html-comp>
</div>

<div id="navBarTour">
    <navbar-x-s></navbar-x-s>
</div>

<div class="new-formatting-container customer-container" ng-class="{'is-inactive' : !isCurrentUserActive}">  
    <div class="row vendor-profile-header">
        <div class="col-sm-6 col-md-5 vendor-avatar">
            <div id="imageOverlay" class="image-overlay pointer" ng-click="launchProfileImageModal()" disabled="true">
                <img id="vendorProfileImage" ng-src="{{StateService.getCurrentUser().vendor.photo.image_url}}" data-toggle="modal"/>
                <div id="profileOverlay" class="pointer"><span>Change Profile Image</span></div>
            </div>
        </div>
        <div class="col-sm-6 col-md-7 vendor-header-content">

            <div class="row new-vendor-name-style">
                <div class="col-sm-12">
                    {{StateService.getCurrentUser().vendor.company_name}}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <span class="new-hr-heading-style">
                        <div ng-show="StateService.getCurrentUser().vendor.address.city.length == null">
                            City, Province
                        </div>
                        <span ng-show="StateService.getCurrentUser().vendor.address.city != null && StateService.getCurrentUser().vendor.address.state != null">            
                            <span class="glyphicon glyphicon-map-marker"></span> {{StateService.getCurrentUser().vendor.address.city}}, {{StateService.getCurrentUser().vendor.address.state}}
                        </span>
                        <span ng-hide="StateService.getCurrentUser().vendor.phone == null">
                             | <a ng-hide="StateService.getCurrentUser().vendor.phone == null" href="tel:{{StateService.getCurrentUser().vendor.phone}}" target="_blank">
                             <span class="glyphicon glyphicon-earphone"></span> {{StateService.getCurrentUser().vendor.phone}}
                             </a>
                        </span>
                        <span ng-hide="StateService.getCurrentUser().vendor.webpage == null">
                             | <a href="http://{{StateService.getCurrentUser().vendor.webpage}}" target="_blank">Our Website</a>
                        </span>
                        <span ng-hide="StateService.getCurrentUser().vendor.twitter_url == null"> 
                             | <a href="{{StateService.getCurrentUser().vendor.twitter_url}}">Twitter</a> </span>
                        <span ng-hide="StateService.getCurrentUser().vendor.facebook_url == null">
                             | <a ng-hide="StateService.getCurrentUser().vendor.facebook_url == null" href="{{StateService.getCurrentUser().vendor.facebook_url}}" target="_blank">Facebook</a>
                        </span>
                    </span>
                    <span class="update-profile-sm-buttons pull-right">
                        <button class="btn beLocal-btn-filled" data-toggle="modal" ng-click="editProfile()" data-target="#profileModal" id="editProfileBtn">
                            Edit Profile
                        </button>
                        &nbsp;
                        <button class="btn beLocal-btn-filled" data-toggle="modal" ng-click="generateSocialStrings()" data-target="#shareModal"  id="socialMediaBtn">Post to Social Media</button>
                    </span>
                </div>
            </div>

            <hr>
            <div class="description-container">
                <span ng-show="StateService.getCurrentUser().vendor.description == ''">Please enter a description for your business using the Edit Profile button above.</span>
                {{StateService.getCurrentUser().vendor.description}}
            </div>
        </div>
    </div>


<!--Display Seller's Locations-->
    <hr>
    <div class="row">
        <div class="col-xs-12">
             <span class="new-hr-heading-style">
                YOUR SELLING LOCATIONS
            </span>
            <span class="pull-right">
                <button class="btn beLocal-btn-filled" data-toggle="modal" ng-click="resetLocationModal()" data-target="#locationModal" id="addLocationBtn">
                    <div class="hidden-mobile">Create New Location</div>
                    <div class="show-mobile">+</div>
                </button>
            </span>
        </div>
    </div>
    <hr>

    <div class="row">
        <div ng-hide="marketLocations.length == 0 && sellerLocations.length == 0">
            <div class="col-sm-4">
                <div class="map-container">
                    <div class="bl-map" be-local-map locations="sellerLocations" markets="marketLocations"></div>
                </div>
            </div>
        </div>   
        <div class="col-sm-8">
            <!-- NG-REPEAT FOR MARKETS -->
            <div id="markets">
                <div class="new-heading-style">
                        Market Locations
                </div>
                <div class="vendor-placeholder-text" ng-show="marketLocations.length == 0">
                    <p class="no-bottom-margin">You're not selling at any markets right now! Try joining one by clicking the Create Location button.</p>
                </div>
                <!-- repeating for each location that seller has in the db -->
                <div ng-repeat="location in marketLocations" class="container-for-cards">
                    <div class="card-formatting" ng-mouseenter="highlightPins(location)" ng-mouseleave="unHighlightPins(location)">
                        <div class="row">

                            <!-- Display the locations name -->
                            <div class="col-xs-9 card-lable-style">
                                {{location.name}}
                            </div>

                            <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                            <div class="col-xs-3 edit-delete-buttons">
                                <span data-toggle="tooltip" data-placement="left" title="Leave Market">
                                    <span class="edit-text glyphicon glyphicon-trash" ng-click="leaveMarket(location)" data-toggle="modal" data-target="TBA"></span>
                                </span>
                            </div> 


                        </div>

                        <div class="location-details seller-location-details">
                            <p><b>LOCATION:</b>
                                {{location.address.addr_line1}},
                                {{location.address.city}}, 
                                {{location.address.state}}, 
                                {{location.address.zipcode}}
                            </p>
                            <p><b>HOURS:</b>
                                    <ul class="list-inline store-hours">&nbsp
                                    <li ng-repeat="day in location.address.hours">
                                        <b>{{weekdays[day.weekday - 1]}}</b>: {{day.from_hour}} - {{day.to_hour}}
                                    </li>

                                    </ul>
                            </p>

                           <p class="indent-after-first-line"><b>DETAILS:</b>
                                 {{location.description}}
                            </p>
                        </div>    
                    </div>
                </div>
                <!-- end of repeating for each market that seller has in the db -->
            </div>
            <div id="customLocations">
                <!-- NG-REPEAT FOR CUSTOM LOCATIONS -->
                <div class="new-heading-style">
                        Custom Locations
                </div>
                <div class="vendor-placeholder-text" ng-show="sellerLocations.length == 0">
                    <p class="no-bottom-margin">You haven't created any custom locations yet! Try making one by clicking the Create Location button.</p>
                </div>    
                <!-- repeating for each location that seller has in the db -->
                <div ng-repeat="location in sellerLocations" ng-mouseenter="highlightPins(location)" ng-mouseleave="unHighlightPins(location)" class="container-for-cards">
                    <div class="card-formatting">
                        <div class="row">

                            <!-- Display the locations name -->
                            <div class="col-xs-9 card-lable-style">
                                {{location.name}}
                            </div>

                            <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                            <div class="col-xs-3 edit-delete-buttons">
                                <span data-toggle="tooltip" data-placement="left" title="Edit Location">
                                <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#locationModal" ng-click="editLocation(location)"></span>
                                </span>
                                <span data-toggle="tooltip" data-placement="left" title="Delete Location">
                                <span class="edit-text glyphicon glyphicon-trash" ng-click="deleteLocation(location)" data-toggle="modal" data-target="TBA"></span>
                                </span>
                            </div> 

                        </div>

                        <div class="location-details seller-location-details">
                            <span ng-show="location.address">
                                <p><b>LOCATION:</b>
                                    {{location.address.addr_line1}},
                                    {{location.address.city}}, 
                                    {{location.address.state}}, 
                                    {{location.address.zipcode}}
                                </p>
                            </span>
                            <span ng-show="location.address">
                                <p ng-show="location.date"><b>DATE:</b>
                                    {{location.date | date:" EEEE',' MMMM d'"}},
                                    {{location.address.hours[0].from_hour}} - 
                                    {{location.address.hours[0].to_hour}}
                                </p>

                                <div ng-show="location.date == null" >
                                <p><b>HOURS:</b>
                                        <ul class="list-inline store-hours">&nbsp
                                        <li ng-repeat="day in location.address.hours">
                                            <b>{{weekdays[day.weekday - 1]}}</b>: {{day.from_hour}} - {{day.to_hour}}
                                        </li>

                                        </ul>
                                </p>
                                </div>
                            </span>

                            <span ng-show="location.email || location.phone">
                                <p><b>CONTACT INFORMATION:</b>
                                    {{location.phone}}
                                    <span ng-show="location.email && location.phone"> | </span>
                                    {{location.email}}
                                </p>
                            </span>
                            <span ng-show="location.description">
                                <p class="indent-after-first-line"><b>DETAILS:</b>
                                    <span>{{location.description}}</span>
                                </p>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- end of repeating for each custom location that seller has in the db -->
            </div>
        </div>
    </div>


<br>
<!--Display Seller's Inventory-->
    <hr>
    <div class="row">
        <div class="col-xs-9 new-hr-heading-style">
            YOUR INVENTORY
        </div>
        <div class="col-xs-3">
            <button class="btn beLocal-btn-filled btn-md pull-right" data-toggle="modal" data-target="#itemModal" ng-click="resetItemModal()" id="addItem">
                <div class="hidden-mobile">Create New Item</div>
                <div class="show-mobile">+</div>
            </button>
        </div>
    </div>
    <hr>

    <div id="viewItems">
        <div class="vendor-placeholder-text" ng-show="sellerItems.length == 0">
            <p class="no-bottom-margin">You haven't added any items yet! Try adding one by clicking the Create New Item button.</p>
        </div>     

        <!-- repeating for each item that seller has in the db -->
         <div ng-repeat="product in sellerItems | orderBy:'name'" class="container-for-cards">

                <!-- Need this div to allow for space between each of the sellers items -->
                <div class="card-formatting">
                    <div class="row">

                    <!-- Display the locations name -->
                        <div class="col-sm-2 vendor-product-image">
                            <img ng-src="{{product.photo.image_url}}"/>

                        </div>
                        <div class="col-xs-9 col-sm-7 ">
                            <div class="card-lable-style">{{product.name}}</div>
                            <div class="location-details">
                                <p><b>PRODUCT DETAILS:</b> {{product.description}}</p>
                                <p><b>CATEGORY:</b> {{product.category.name}} </p>
                                <p><b>TAGS:</b><span ng-repeat="tag in product.tags"> {{tag}} &nbsp; </span></p>
                            </div>
                        </div>

                        <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                        <div class="col-xs-3 edit-delete-buttons">
                            <span data-toggle="tooltip" data-placement="left" title="Edit Item">
                                <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#itemModal" ng-click="editItem(product)"></span>
                            </span>
                            <span data-toggle="tooltip" data-placement="left" title="Delete Item">
                                <span class="edit-text glyphicon glyphicon-trash" ng-click="deleteProduct(product)" data-toggle="modal" data-target="TBA"></span>
                            </span>
                        </div> 
                    </div>

                <!-- THIS IS THE NON-REPEATING PART -->
                <div class="row">
                    <div class="col-sm-12 seller-stock-formatting new-stock-style">
                        <hr class="availability-hr">
                        Current Availability:
                        <span class="pull-right">
                            <input type="radio" ng-change="stockValueChanged(product)" ng-model="product.stock" name="stock{{$index}}" value="IS"> In Stock
                            <input type="radio" ng-change="stockValueChanged(product)" ng-model="product.stock" name="stock{{$index}}" value="OOS"> Out of Stock
                        </span>
                    </div>
                </div>
            </div>
            <!--  end of repeat for each seller's items location -->

        </div>
        <!--  end of repeat for each item the seller sells-->
    </div>

</div>

<!-- INJECTING FOOTER.HTML -->
<footer></footer>


<!-- END OF CONTAINTER-SELLER -->



<!-- START OF MODALS -->

<!-- Seller Profile Modal -->
<div class="modal fade profile-modal" id="profileModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4>Update Your Profile<br />
                <small>Please Note: This information will be visible to others using this application.</small>
                </h4>               
            </div>
            <div class="modal-body">  
                <div class="container-fluid">                   
                    <form role="form" class="profile-modal" name="profileForm" novalidate>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group" ng-class="{ 'has-error' : profileForm.companyName.$invalid }">
                                    <label for="company-name">Company Name</label> 
                                    <input required ng-model="currentUser.vendor.company_name" type="text" name="companyName" class="form-control profile-modal" id="company-name" placeholder="Company Name" maxlength="30"/>
                                    <span class="error pull-right" ng-show="profileForm.companyName.$invalid">
                                        Your company's name is required.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <div class="form-group" ng-class="{ 'has-error' : profileForm.number.$invalid }">
                                        <label for="company-description">Company Phone Number</label>
                                        <input phone ng-model="currentUser.vendor.phone" type="text" name="number" class="form-control" id="company-description" placeholder="Optional Phone Number" maxlength="20"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <label for="company-description">Company Website</label>
                                <input ng-model="currentUser.vendor.webpage" type="text" name="website" class="form-control" id="company-description" placeholder="Optional Website URL" maxlength="400"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <br>
                                <label for="company-description">Facebook Link</label>
                                <input ng-model="currentUser.vendor.facebook_url" type="text" name="website" class="form-control" id="company-description" placeholder="Optional Facebook URL" maxlength="400"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <br>
                                <label for="item-name">Company Location</label>
                            </div>
                        </div>
                        <div class="well">
                            <!-- <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group" ng-class="{ 'has-error' : profileForm.address.$invalid }">
                                        <label for="item-name">Street Address</label>
                                        <input required ng-model="currentUser.vendor.address.addr_line1" type="text" name="address" class="form-control" id="item-name" placeholder="Street Address" maxlength="50"/>
                                    </div>
                                </div>
                            </div> -->
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group" ng-class="{ 'has-error' : profileForm.city.$invalid }">
                                        <label for="item-name">City</label>
                                        <input required ng-model="currentUser.vendor.address.city" type="text" name="city" class="form-control" id="item-name" placeholder="City" maxlength="20"/>
                                        <span class="error pull-right" ng-show="profileForm.city.$invalid">
                                            Your city is required.
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group" ng-class="{ 'has-error' : profileForm.province.$invalid }">
                                        <label for="item-name">Province</label>
                                        <input required ng-model="currentUser.vendor.address.state" type="text" name="province" class="form-control" id="item-name" placeholder="Province or Territory" maxlength="2"/>
                                        <span class="error pull-right" ng-show="profileForm.province.$invalid">
                                            Your province is required.
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group" ng-class="{ 'has-error' : profileForm.country.$invalid }">
                                        <label for="item-name">Country</label>
                                        <input required ng-model="currentUser.vendor.address.country" type="text" name="country" class="form-control" id="item-name" placeholder="Country" maxlength="36"/>
                                        <span class="error pull-right" ng-show="profileForm.country.$invalid">
                                            Your country is required.
                                        </span>
                                    </div>
                                </div><!-- 
                                <div class="col-xs-6">
                                    <div class="form-group" ng-class="{ 'has-error' : profileForm.zip.$invalid }">
                                        <label for="item-name">Postal Code</label>
                                        <input required ng-model="currentUser.vendor.address.zipcode" type="text" name="zip" class="form-control" id="item-name" placeholder="Postal Code" maxlength="7"/>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group" ng-class="{ 'has-error' : profileForm.descriptionField.$invalid }">
                                    <label for="company-description">About Your Company<br>
                                    </label>
                                    <textarea required ng-model="currentUser.vendor.description" type="text" name="descriptionField" class="form-control" id="company-description" placeholder="About Your Company" maxlength="850"/>
                                    <span class="error pull-right" ng-show="profileForm.descriptionField.$invalid">
                                        Company description is required.
                                    </span>
                                    <p class="pull-right" ng-hide="profileForm.descriptionField.$invalid">
                                        {{850 - currentUser.vendor.description.length}} characters remaining
                                    </p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="vendorProfileUpdate()" class="btn beLocal-btn-filled">Save Changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- Seller Add/Edit Profile Image -->
<div class="modal fade" id="profileImageModal" data-backdrop="static" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Upload New Profile Image</h4>
                <small>Please upload an image file less than 3 MB.</small>
            </div>
            <div class="modal-body">  
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-12 col-md-12">
                            <div class="dotted-image-container" ng-show="showImageSelectButton">
                                <input style="display:none" onchange="angular.element(this).scope().handleProfileImageFileSelect(this.files)" name="imageField" type="file" id="profile-image" accept="image/*">
                                <button type="button" id="triggerImageSelect" class="btn beLocal-btn-filled btn-image-select" ng-click="triggerImageSelect()">Select Image to Upload</button>
                            </div>
                            <div class="crop-image-wrapper">
                                 <img-cropped src='{{profileImage|trusted}}' selected='selected(cords)'/>
                                  <p ng-show="profileImageError != null" class="help-block"><span style="color: #a94442;" >{{profileImageError}}</span></p>
                            </div>
                            <div ng-show="showImageCroppingText" id="imageCroppingText" style="padding:0 50px 0 50px;">
                                <p style="text-align:center;">To make adjustments to the image, drag and resize the selected area above.
                                Once you are happy with your image, click <b>Save Profile Image</b> below.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" ng-click="uploadProfileImage()" id="uploadProfileImage" data-loading-text="<i class='fa fa-refresh fa-spin'></i>" ng-disabled="disableProfileImageSubmit" class="btn beLocal-btn-filled">Save Profile Image</button>
            </div>
        </div>
    </div>
</div>

<!-- Seller Add/Edit Item Modal -->
<div class="modal fade " id="itemModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 ng-hide="isEditingItem" class="modal-title">Add New Item<br /><small>Please complete the following fields to add a new item</small></h4>
                <h4 ng-show="isEditingItem" class="modal-title">Edit Item<br /><small>Please change any of the fields below to update an existing item</small></h4>                
            </div>
            <div class="modal-body">  
                <div class="container-fluid">                   
                    <form role="form" name="itemForm" novalidate>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.imageField.$invalid }">
                                    <label ng-hide="isEditingItem" for="item-image">Add Image</label>
                                    <label ng-show="isEditingItem" for="item-image">Change Image</label><br />
                                    <img ng-show="displayItemThumbnail" src="#" id="itemPreview" />
                                    <input onchange="angular.element(this).scope().fileNameChanged(this.files)" name="imageField" type="file" id="item-image">
                                    <p ng-show="productImageError != null" class="help-block"><small style="color: #a94442;" >{{productImageError}}</small></p>                                      
                                </div>
                               
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.itemField.$invalid }">
                                    <label for="item-name">Item Name</label>
                                    <input required ng-model="itemName" type="text" name="itemField" class="form-control" id="item-name" placeholder="Item Name" maxlength="40"/>
                                    <span class="error pull-right" ng-show="newItemSubmitted && itemForm.itemField.$invalid">
                                        The item's name is required.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.descriptionField.$invalid }">
                                    <label for="item-name">Item Description</label>
                                    <textarea required ng-model="itemDescription" type="text" name="descriptionField" class="form-control" id="item-name" placeholder="Item Description" maxlength="400"/>
                                    <span class="error pull-right" ng-show="newItemSubmitted && itemForm.descriptionField.$invalid">
                                        The item's description is required.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div ng-hide="isEditingItem" class="form-group">
                                    <label for="item-name" class="no-bottom-margin">Item Stock<br></label>
                                    <small><br>"In Stock" items will be seen by others using the site, while "Out of Stock" items will be hidden. </small>
                                    <div>
                                        <input type="radio" ng-model="newItemStock" name="newItemStock" value="IS"><span class="radio-padding-right"> In Stock</span>
                                        <input type="radio" ng-model="newItemStock" name="newItemStock" value="OOS"> Out of Stock
                                    </div>
                                </div>
                            </div>                        
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <label for="item-name" class="no-bottom-margin">Item Category<br></label>
                                <small><br>Please select the category that best fits your product.</small>
                                <div class="form-group"  ng-class="{ 'has-error' : newItemSubmitted && itemForm.itemCategory.$invalid }">
                                    <select class="form-control" ng-options="category.id as category.name for category in categoryList" ng-model="itemCategory">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <label for="item-name" class="no-bottom-margin">Tags<br></label>
                                <small><br>Please select all tags that meaningfully represent your product.</small>
                                <div class="row form-group">
                                    <div class="col-sm-4" ng-repeat="tag in tagList">
                                        <label class="checkbox tag-formatting">
                                            <input type="checkbox" ng-model="tag.checked"> &nbsp; {{tag.name}} &nbsp; 
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="newItemSubmit()" class="btn beLocal-btn-filled">{{submitItemButtonText}}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- Seller Add/Edit Location Modal  -->
<div class="modal fade" id="locationModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header edit-location-modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 ng-hide="isEditingLocation" class="modal-title">Add New Location<br /><small>Please complete the following fields to add a new location</small></h4>
                <h4 ng-show="isEditingLocation" class="modal-title">Edit Location<br /><small>Please change any of the fields below to update an existing location</small></h4>                
            </div>
            <div class="modal-body edit-location-modal-body">  
                <div class="container-fluid">
                    <div class="full-width-tabs" ng-show="isEditingLocation == false">
                        <ul class="nav nav-tabs location-tabs" role="tablist">
                              <li role="presentation" class="active full-width"><a id="marketLocationTab" href="/vendor/#marketLocation" ng-click="doMarketLocation()" role="tab" data-toggle="tab">Join Existing Market</a></li>
                              <li role="presentation" class="full-width"><a id="customLocationTab" href="/vendor/#customLocation" ng-click="doCustomLocation()" role="tab" data-toggle="tab">Create New Custom Location</a></li>
                        </ul>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane" id="customLocation" class="profile-modal">                                 
                            <form role="form" name="locationForm" novalidate>
                                <div class="row">
                                    <div class="col-xs-6 col-md-6">
                                        <div class="form-group" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.locationField.$invalid }">
                                            <label class="control-label">Location Name</label>
                                            <input required ng-model="locationName" type="text" name="locationField" class="form-control" id="item-name" placeholder="Location Name" maxlength="35"/>
                                            <span class="error pull-right" ng-show="newLocationSubmitted && locationForm.locationField.$invalid">
                                                The location's name is required.
                                            </span>
                                        </div>
                                    </div>                        
                                    <div class="col-xs-6 col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Location Type</label><br />
                                            <label class="radio-inline">
                                              <input type="radio" ng-model="locationType" name="locationTypeOptions" id="farmRadio" value="true"><p>One Time Event</p>
                                            </label>
                                            <label class="radio-inline radio-inline-responsive">
                                              <input type="radio" ng-model="locationType" name="locationTypeOptions" id="marketRadio" value="false"><p>Recurring Event</p>
                                            </label>                            
                                        </div>
                                    </div>                        
                                </div>
                                <!-- One Time Date Options -->
                                <div ng-show="locationType" class="row">
                                    <div class="col-xs-6 col-md-6">
                                        <div class="form-group">
                                          <label>Date:</label>                      
                                          <div class="input-group" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.dateField.$invalid }">
                                            <input required type="text" name="dateField" class="form-control date-picker" show-weeks="false" show-button-bar="false" datepicker-popup="MM/dd/yyyy" ng-model="locationDate" is-open="opened" min-date="minDate" max-date="'2015-06-22'" close-text="Close" />
                                            <span class="input-group-btn">
                                              <button class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                            </span>                       
                                          </div>
                                        </div>                               
                                    </div>                        
                                    <div class="col-xs-3 col-md-3">
                                        <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.startField.$invalid}">
                                            <label class="control-label"><i class="fa fa-clock-o"></i> Start Time</label>
                                            <input required type="text" class="form-control" size="8" ng-model="startTime" name="startField" bs-timepicker>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 col-md-3">
                                        <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.endField.$invalid}">
                                            <label class="control-label"><i class="fa fa-clock-o"></i> End Time</label>
                                            <input required type="text" class="form-control" size="8" ng-model="endTime" name="endField" bs-timepicker>
                                        </div>
                                    </div>
                                </div>
                                <!-- Regular Hour Options -->
                                <div ng-hide="locationType">
                                    <label>Hours:</label>
                                    <div class="well">
                                        <div class="row">
                                            <div class="col-xs-6"> 
                                                <label>Days You are Open:</label>
                                            </div>
                                            <div class="col-xs-3"> 
                                                <label>Opening Time:</label>
                                            </div>  
                                            <div class="col-xs-3"> 
                                                <label>Closing Time:</label>
                                            </div>                                                              
                                        </div>
                                        <div ng-repeat="day in locationHours" class="row">
                                            <ng-form name="hoursForm">                                
                                                <div class="col-xs-6">                              
                                                    <div class="checkbox">
                                                      <label>
                                                        <input name="day{{$index}}Check" ng-model="day.checked" type="checkbox">{{day.day}}
                                                      </label>
                                                    </div>
                                                </div>
                                                <div ng-show="day.checked" class="col-xs-3 col-md-3">
                                                    <div class="form-group hours-picker" ng-class="{'has-error': newLocationSubmitted && hoursForm.openHours.$invalid}">
                                                        <input ng-required="day.checked" type="text" class="form-control" size="8" ng-model="day.from_hour" name="openHours" bs-timepicker>
                                                    </div>
                                                </div>
                                                <div ng-show="day.checked" class="col-xs-3 col-md-3">
                                                    <div class="form-group hours-picker" ng-class="{'has-error': newLocationSubmitted && hoursForm.closeHours.$invalid}">
                                                        <input ng-required="day.checked" type="text" class="form-control" size="8" ng-model="day.to_hour" name="closeHours" bs-timepicker>
                                                    </div>
                                                </div> 
                                                <div ng-hide="day.checked" class="col-xs-6 col-md-6 closed-container">
                                                    <p class="closed-string">Closed</p>
                                                </div>
                                            </ng-form>                                        
                                        </div>
                                    </div>
                                </div>                       
                                <div class="row">
                                    <div class="col-xs-12 col-md-12">
                                          <div class="form-group" ng-class="{ 'has-error' : (locationForm.addressText.$invalid ) && newLocationSubmitted }">
                                            <label class="control-label">Address</label>
                                            <input type="text" autocomplete="off" name="addressText" typeahead="result.formatted_address for result in getLocation($viewValue)" typeahead-on-select="makeSelection($item)" class="form-control" ng-model="addressSearchText" placeholder="Search for an Address" required>
                                            <span class="error pull-right" ng-show="newLocationSubmitted && locationForm.addressText.$invalid">
                                                {{addressErrorString}}.
                                            </span>
                                          </div>
                                    </div>                                                                                               
                                </div>                                            
                                <div class="row">
                                    <div class="col-xs-6 col-md-6" ng-class="{'has-error': newLocationSubmitted && locationForm.phoneField.$invalid}">
                                        <div class="form-group">
                                            <label class="control-label">Phone Number</label>
                                            <input phone ng-model="phoneAtLocation" type="text" class="form-control" id="item-name" name="phoneField" placeholder="Optional Phone Number" maxlength="20"/>
                                            <span class="error pull-right" ng-show="newLocationSubmitted && locationForm.phoneField.$invalid">
                                                Please enter a valid phone number.
                                            </span>                                            
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-md-6">
                                        <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.emailField.$invalid}">
                                            <label class="control-label">Email</label>
                                            <input type="text" ng-model="emailAtLocation" class="form-control" id="item-name" name="emailField" placeholder="Optional Email" maxlength="40"/>
                                        </div>
                                    </div>                                                                   
                                </div>
                                <div class="row">
                                    <div class="col-xs-12 col-md-12">
                                        <div class="form-group no-bottom-margin" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.locationDescriptionField.$invalid }">
                                            <label class="control-label">Location Details</label>
                                            <textarea ng-model="locationDescription" type="text" name="locationDescriptionField" class="form-control" placeholder="Optional description about this selling location." maxlength="300"/>

                                        </div>
                                    </div>                        
                                </div>                                                          
                            </form>
                        </div>
                        <div class="tab-pane active" id="marketLocation">
                            <form role="form" name="marketForm" novalidate>
                                <div class="form-group">
                                    <label>Select the Market You're Selling At:</label>
                                    <select ng-show="StateService.getAvailableMarketList().length > 0" ng-model="newLocationMarket" id="modalMarketPicker" class="form-control" ng-options="market as market.name for market in StateService.getAvailableMarketList()"></select>
                                    <div ng-show="newLocationMarket.name != null && StateService.getAvailableMarketList().length > 0">
                                        <!-- 
                                        <p>{{newLocationMarket.name}} Details:</p> -->

                                        <br>
                                        <p>
                                            <b>Details for {{newLocationMarket.name}}:</b>
                                        </p>
                                        <p class="indent">
                                            <b>Address:</b>
                                            <br>
                                            <span class="store-hours">
                                                {{newLocationMarket.address.addr_line1}},
                                                {{newLocationMarket.address.city}}, 
                                                {{newLocationMarket.address.state}}, 
                                                {{newLocationMarket.address.zipcode}}
                                            </span>
                                        </p>
                                        <span class="indent"><b>Hours:</b></span>
                                        <ul class="list-inline store-hours indent">&nbsp
                                            <li ng-repeat="day in newLocationMarket.address.hours">
                                                <b>{{weekdays[day.weekday - 1]}}</b>: {{day.from_hour}} - {{day.to_hour}}
                                            </li>
                                        </ul>
                                    </div>

                                    <p ng-hide="StateService.getAvailableMarketList().length > 0" class="medium-margin">You're already selling at all the running markets in town! 
                                    <br>Try <a class="pointer beLocal-a" ng-click="manuallyTriggerCustomLocation()">creating</a> a new custom location instead.</p> 
                                </div>   
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer no-top-margin">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="newLocationSubmit()" class="beLocal-btn-filled btn">{{submitLocationButtonText}}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="shareModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Post to Social Media<br /><small>Please review the following fields and check or uncheck the boxes below to update your various social media accounts.</small></h4>
            </div>
            <div class="modal-body">
                <label><i class="fa fa-facebook-square"></i> Facebook Status Update</label> 
                <p><strong>Note:</strong>  Permission to post to your wall is pending approval from Facebook. If you want to share this update, please copy and paste it into your Facebook status!</p>           
                <textarea rows="10" required ng-model="facebookString" type="text" name="facebookField" class="form-control" id="facebook-field" placeholder="Facebook Status Update" />
<!--                 <div class="checkbox">
                  <label>
                    <input name="fbCheck" ng-model="facebookChecked" type="checkbox"><strong>Post to Facebook</strong>
                  </label>
                </div> -->
                <br>
                <label><i class="fa fa-twitter-square"></i> Twitter Status Update</label>
                <div ng-show="isTwitterAuth">
                    <textarea rows="4" required ng-model="twitterString" type="text" name="twitterField" class="form-control" id="twitter-field" placeholder="Twitter Status Update" maxlength="140" />
                    <p class="character-counter">
                        {{140 - twitterString.length - hashtag.length}} left (All Tweets will include the beLocal hashtag)
                    </p>
                    <div class="checkbox">
                      <label>
                        <input name="twChecked" ng-model="twitterChecked" type="checkbox"><strong>Post to Twitter</strong>
                      </label>
                    </div>
                </div>
                <div style="text-align:center;" ng-hide="isTwitterAuth">
                    <button type="submit" ng-click="doTwitterSignIn()" class="beLocal-btn-filled btn">Sign in to Twitter</button>                    
                </div>                                           
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button ng-disabled="!facebookChecked && !twitterChecked" type="button" ng-click="publishSocialUpdate()" class="btn beLocal-btn-filled">Post Update</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->